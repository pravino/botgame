The "Financial Ledger" Schema (PostgreSQL)
This schema handles Free, Bronze, Silver, and Gold tiers, the Founder Bonus, and the Daily Payouts.
sql
-- 1. TIER DEFINITIONS (The "Rules")
CREATE TABLE tiers (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,          -- 'Free', 'Bronze', 'Silver', 'Gold'
    price DECIMAL(10,2),         -- 0.00, 5.00, 15.00, 50.00
    daily_unit DECIMAL(10,2),    -- 0.00, 0.10, 0.30, 1.00 (The 60% Drip)
    tap_multiplier INT DEFAULT 1 -- 1x, 3x, 10x
);

-- 2. USERS (The "Players")
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    telegram_id BIGINT UNIQUE NOT NULL,
    username TEXT,
    tier_id INT REFERENCES tiers(id) DEFAULT 0,
    
    -- Financials
    virtual_usdt_balance DECIMAL(10,4) DEFAULT 0.0000, -- Real USDT they can withdraw
    total_lifetime_coins BIGINT DEFAULT 0,             -- For "Flex" and Free Airdrops
    
    -- Membership Stats
    subscription_active BOOLEAN DEFAULT FALSE,
    subscription_expiry TIMESTAMP,
    bronze_join_order INT,   -- To track the first 100 "Founders"
    is_founder BOOLEAN DEFAULT FALSE,
    
    -- Game Energy
    current_energy INT DEFAULT 1000,
    last_energy_refill TIMESTAMP DEFAULT NOW()
);

-- 3. DAILY ACTIVITY (The "Paycheck" Ledger)
-- This table is TRUNCATED (cleared) every night after payout
CREATE TABLE daily_activity (
    user_id UUID REFERENCES users(id),
    taps_today INT DEFAULT 0,
    predictions_correct INT DEFAULT 0,
    date DATE DEFAULT CURRENT_DATE,
    PRIMARY KEY (user_id, date)
);

-- 4. TRANSACTIONS (The "Audit Trail")
CREATE TABLE transactions (
    id SERIAL PRIMARY KEY,
    user_id UUID REFERENCES users(id),
    type TEXT,               -- 'MEMBERSHIP_PURCHASE', 'WITHDRAWAL', 'BONUS'
    amount DECIMAL(10,2),
    tx_hash TEXT UNIQUE,     -- The TON Blockchain Hash
    status TEXT DEFAULT 'pending' -- 'pending', 'completed', 'flagged'
);
Use code with caution.

Why this Schema is your "Millionaire Fail-Safe":
Founder Tracking: The bronze_join_order allows your middleware to automatically apply the $0.20/day subsidy only to your first 100 supporters.
Withdrawal Safety: The virtual_usdt_balance is updated only by your Backend Logic. Even if a user "hacks" their screen to show 1 million coins, they can only withdraw what this ledger says.
Tier Segregation: By linking a tier_id, your middleware knows exactly which pool (Bronze vs Gold) to calculate the $0.10 or $1.00 daily drip from.
Efficiency: The daily_activity table is separate from users. This means your midnight "Payout Cron" only has to scan a small table, keeping your server fast as you grow to 10,000 users.
The "Admin Pulse" Query
With this schema, you can run one command to see your net profit:
SELECT SUM(amount) * 0.4 FROM transactions WHERE type = 'MEMBERSHIP_PURCHASE';